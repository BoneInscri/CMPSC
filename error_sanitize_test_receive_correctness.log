==================
WARNING: ThreadSanitizer: data race (pid=1944525)
  Read of size 4 at 0x7b1400000070 by main thread (mutexes: write M0):
    #0 channel_sema_signal /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:125 (channel_sanitize+0xbcdc2)
    #1 channel_send /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:371 (channel_sanitize+0xbd0fe)
    #2 test_receive_correctness /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:318 (channel_sanitize+0xc0f7c)
    #3 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #4 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Previous write of size 4 at 0x7b1400000070 by thread T2 (mutexes: write M2):
    #0 my_sema_wait /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:14 (channel_sanitize+0xbd1b0)
    #1 channel_sema_wait /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:74 (channel_sanitize+0xbd1b0)
    #2 channel_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:408 (channel_sanitize+0xbd1b0)
    #3 helper_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:96 (channel_sanitize+0xc039f)

  As if synchronized via sleep:
    #0 usleep <null> (channel_sanitize+0x48237)
    #1 test_receive_correctness /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:312 (channel_sanitize+0xc0f06)
    #2 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #3 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Location is heap block of size 80 at 0x7b1400000050 allocated by main thread:
    #0 malloc <null> (channel_sanitize+0x13947)
    #1 channel_mysema_init /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:53 (channel_sanitize+0xbc97c)
    #2 channel_create /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:312 (channel_sanitize+0xbcf4c)
    #3 test_receive_correctness /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:279 (channel_sanitize+0xc0d6b)
    #4 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #5 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Mutex M0 (0x7b1800000008) created at:
    #0 pthread_mutex_init <null> (channel_sanitize+0x2dbd1)
    #1 channel_create /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:309 (channel_sanitize+0xbcf23)
    #2 test_receive_correctness /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:279 (channel_sanitize+0xc0d6b)
    #3 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #4 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Mutex M2 (0x7b1400000078) created at:
    #0 pthread_mutex_init <null> (channel_sanitize+0x2dbd1)
    #1 my_sema_init /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:8 (channel_sanitize+0xbc9b7)
    #2 channel_mysema_init /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:59 (channel_sanitize+0xbc9b7)
    #3 channel_create /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:312 (channel_sanitize+0xbcf4c)
    #4 test_receive_correctness /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:279 (channel_sanitize+0xc0d6b)
    #5 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #6 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Thread T2 (tid=1944528, running) created by main thread at:
    #0 pthread_create <null> (channel_sanitize+0x422a8)
    #1 test_receive_correctness /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:308 (channel_sanitize+0xc0efc)
    #2 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #3 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

SUMMARY: ThreadSanitizer: data race /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:125 in channel_sema_signal
==================
ThreadSanitizer: reported 1 warnings
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
Running test case: test_receive_correctness : Testing the receive correctness ...
ALL TESTS PASSED
Tests run: 30
