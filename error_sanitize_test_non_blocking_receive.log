==================
WARNING: ThreadSanitizer: data race (pid=1944708)
  Read of size 4 at 0x7b1400000020 by thread T4 (mutexes: write M0):
    #0 channel_sema_signal /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:125 (channel_sanitize+0xbcdc2)
    #1 channel_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:426 (channel_sanitize+0xbd231)
    #2 helper_non_blocking_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:120 (channel_sanitize+0xc040c)

  Previous write of size 4 at 0x7b1400000020 by thread T3 (mutexes: write M1):
    #0 my_sema_wait /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:14 (channel_sanitize+0xbd093)
    #1 channel_sema_wait /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:74 (channel_sanitize+0xbd093)
    #2 channel_send /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:353 (channel_sanitize+0xbd093)
    #3 helper_send /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:88 (channel_sanitize+0xc02cb)

  Location is heap block of size 80 at 0x7b1400000000 allocated by main thread:
    #0 malloc <null> (channel_sanitize+0x13947)
    #1 channel_mysema_init /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:53 (channel_sanitize+0xbc97c)
    #2 channel_create /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:311 (channel_sanitize+0xbcf30)
    #3 test_non_blocking_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:446 (channel_sanitize+0xc15dc)
    #4 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #5 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Mutex M0 (0x7b1800000008) created at:
    #0 pthread_mutex_init <null> (channel_sanitize+0x2dbd1)
    #1 channel_create /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:309 (channel_sanitize+0xbcf23)
    #2 test_non_blocking_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:446 (channel_sanitize+0xc15dc)
    #3 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #4 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Mutex M1 (0x7b1400000028) created at:
    #0 pthread_mutex_init <null> (channel_sanitize+0x2dbd1)
    #1 my_sema_init /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:8 (channel_sanitize+0xbc9b7)
    #2 channel_mysema_init /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:59 (channel_sanitize+0xbc9b7)
    #3 channel_create /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:311 (channel_sanitize+0xbcf30)
    #4 test_non_blocking_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:446 (channel_sanitize+0xc15dc)
    #5 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #6 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Thread T4 (tid=1944713, running) created by main thread at:
    #0 pthread_create <null> (channel_sanitize+0x422a8)
    #1 test_non_blocking_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:471 (channel_sanitize+0xc1710)
    #2 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #3 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

  Thread T3 (tid=1944712, running) created by main thread at:
    #0 pthread_create <null> (channel_sanitize+0x422a8)
    #1 test_non_blocking_receive /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:467 (channel_sanitize+0xc16dd)
    #2 single_test /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2061 (channel_sanitize+0xc6c65)
    #3 main /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/test.c:2100 (channel_sanitize+0x955e)

SUMMARY: ThreadSanitizer: data race /media/boneinscri/Expand_1/HDU/留学生辅导/1/CMPSC/channel.c:125 in channel_sema_signal
==================
ThreadSanitizer: reported 1 warnings
Running test case: test_non_blocking_receive : Testing non blocking receive ...
ALL TESTS PASSED
Tests run: 1
